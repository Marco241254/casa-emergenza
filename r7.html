<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R7 - COMPONENTE QE1 - Backup Caldaia</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: linear-gradient(145deg, #2d3748 0%, #1a202c 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid #4a5568;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(90deg, #9b59b6 0%, #8e44ad 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #9b59b6;
        }
        
        .header h1 {
            color: white;
            font-size: 2.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .photo-section {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #34495e;
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .photo-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }
        
        .photo-card:hover {
            border-color: #9b59b6;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .photo-real {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }
        
        .photo-real:hover {
            border-color: #9b59b6;
            transform: scale(1.05);
        }
        
        .photo-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .location-section {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #3498db;
        }
        
        .emergency-section {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e74c3c;
        }
        
        .function-section {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #9b59b6;
        }
        
        .checklist-section {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #9b59b6;
        }
        
        .troubleshooting-section {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #f39c12;
        }
        
        .status-section {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 3px solid #e74c3c;
        }
        
        .section-title {
            color: white;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .checklist-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .checklist-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 12px;
            border: 2px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .checklist-item:hover {
            background: rgba(255,255,255,0.15);
            border-color: #9b59b6;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .checklist-item.checked {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            border-color: #00b894;
        }
        
        .checkbox {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 2px solid #fff;
            border-radius: 4px;
            margin-right: 15px;
            position: relative;
            vertical-align: middle;
            transition: all 0.3s ease;
        }
        
        .checklist-item.checked .checkbox {
            background: #fff;
            border-color: #fff;
        }
        
        .checklist-item.checked .checkbox:after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00b894;
            font-weight: bold;
            font-size: 16px;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894 0%, #00a085 100%);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 5px;
        }
        
        .progress-text {
            text-align: center;
            color: white;
            margin-top: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .contact-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #3498db;
        }
        
        .contact-card h4 {
            color: #3498db;
            margin-top: 0;
        }
        
        .highlight-box {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #9b59b6;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: #2c3e50;
        }
        
        .highlight-box h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .critical-warning {
            background: linear-gradient(135deg, #d35400 0%, #e67e22 100%);
            border: 3px solid #e67e22;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }
        
        .critical-warning h4 {
            color: white;
            margin-top: 0;
            font-size: 1.3em;
        }
        
        .gas-status-box {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border: 3px solid #e74c3c;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }
        
        .gas-status-box h4 {
            color: white;
            margin-top: 0;
            font-size: 1.5em;
        }
        
        .result-box {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #27ae60;
        }
        
        .result-box.warning {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border-color: #e74c3c;
        }
        
        .result-box.emergency {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            border-color: #9b59b6;
        }
        
        .diagnostic-box {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #34495e;
            font-family: 'Courier New', monospace;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .photo-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>🔥 COMPONENTE R7 - QE1</h1>
            <p style="margin: 10px 0; font-size: 1.2em;">Contattore bobina 220V - BACKUP CALDAIA - QUADRO QE1</p>
        </div>
        
        <!-- CRITICAL STATUS -->
        <div class="gas-status-box">
            <h4>🚨 STATO CRITICO GAS</h4>
            <p style="font-size: 1.2em; margin: 10px 0;"><strong>CONTATORE GAS ATTUALMENTE PIOMBATO</strong></p>
            <p>Sistema caldaia backup NON utilizzabile fino a ripristino fornitura gas</p>
            <p><strong>Inverno 2025-2026: SOLO riscaldamento con PDC (Pompa Di Calore)</strong></p>
        </div>
        
        <!-- PHOTO SECTION -->
        <div class="photo-section">
            <h3 class="section-title">📸 FOTO GUIDA SISTEMA</h3>
            <div class="photo-grid">
                <div class="photo-card">
                    <img src="https://raw.githubusercontent.com/Marco241254/casa-emergenza/main/modula_plus_caldaia.jpg" 
                         alt="Caldaia Modula Plus" 
                         class="photo-real"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="photo-placeholder" style="display: none;">🔥</div>
                    <h4>1. Caldaia Modula Plus</h4>
                    <p><strong>Sistema backup riscaldamento</strong><br>
                    <em>ATTENZIONE: Gas attualmente piombato</em></p>
                </div>
                <div class="photo-card">
                    <img src="https://raw.githubusercontent.com/Marco241254/casa-emergenza/main/rubinetti_gas_esterni.jpg" 
                         alt="Rubinetti Gas Esterni" 
                         class="photo-real"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="photo-placeholder" style="display: none;">⛽</div>
                    <h4>2. Rubinetti Gas - Cassetta Esterna</h4>
                    <p><strong>Due rubinetti da aprire</strong><br>
                    <em>Prerequisito per funzionamento caldaia</em></p>
                </div>
                <div class="photo-card">
                    <img src="https://raw.githubusercontent.com/Marco241254/casa-emergenza/main/qe1_quadro_principale.jpg" 
                         alt="QE1 Quadro Principale" 
                         class="photo-real"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="photo-placeholder" style="display: none;">⚡</div>
                    <h4>3. QE1 - Quadro Principale</h4>
                    <p><strong>Locale tecnico dietro caldaia</strong><br>
                    <em>Qui trovi R7 e visore di controllo</em></p>
                </div>
                <div class="photo-card">
                    <img src="https://raw.githubusercontent.com/Marco241254/casa-emergenza/main/qe2.jpg" 
                         alt="QE2 Armadio Shelly" 
                         class="photo-real"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="photo-placeholder" style="display: none;">🔌</div>
                    <h4>4. QE2 - Armadio Shelly</h4>
                    <p><strong>LED R7 per controllo stato</strong><br>
                    <em>Rosso quando caldaia alimentata</em></p>
                </div>
            </div>
        </div>
        
        <!-- LOCATION -->
        <div class="location-section">
            <h3 class="section-title">📍 DOVE TROVARLO</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div class="highlight-box">
                    <h4>🏢 Quadro:</h4>
                    <p><strong>QE1</strong></p>
                </div>
                <div class="highlight-box">
                    <h4>📍 Locale:</h4>
                    <p><strong>LOCALE TECNICO</strong></p>
                </div>
                <div class="highlight-box">
                    <h4>🎯 Posizione:</h4>
                    <p><strong>DIETRO CALDAIA A GAS</strong></p>
                </div>
            </div>
        </div>
        
        <!-- EMERGENCY -->
        <div class="emergency-section">
            <h3 class="section-title">🚨 EMERGENZA - BACKUP RISCALDAMENTO</h3>
            
            <div class="critical-warning">
                <h4>⚠️ QUANDO USARE R7</h4>
                <p><strong>Solo in caso di mancato funzionamento della PDC (Pompa Di Calore)</strong></p>
                <p><strong>🔥 ATTENZIONE CRITICA:</strong> Il contatore del GAS È PIOMBATO per disdetta fornitura gas!</p>
                <p><strong>Tentativo inverno 2025-2026:</strong> SOLO riscaldamento con PDC (Pompa Di Calore)</p>
            </div>
            
            <div class="highlight-box">
                <h4>🔧 ATTIVAZIONE EMERGENZA CALDAIA</h4>
                <p><strong>Prima di attivare R7, verificare:</strong></p>
                <ol>
                    <li><strong>Due rubinetti gas</strong> nella cassetta all'esterno abitazione = APERTI</li>
                    <li><strong>Rubinetto sotto Modula Plus</strong> = APERTO</li>
                    <li><strong>Pressione acqua</strong> > 1.0 bar</li>
                    <li><strong>Contatore gas</strong> non piombato (attualmente È PIOMBATO!)</li>
                </ol>
            </div>
            
            <h4 style="color: white; margin: 20px 0;">📞 CONTATTI EMERGENZA (IN ORDINE)</h4>
            <div class="contact-card">
                <h4>1. MARCO</h4>
                <p>📱 <strong>335-1354309</strong></p>
            </div>
            <div class="contact-card">
                <h4>2. ELVIS MARTINAT - BLUMAR</h4>
                <p>📱 <strong>347-4958076</strong><br>
                <em>San Germano - Idraulica e Gas / PDC</em></p>
            </div>
            <div class="contact-card">
                <h4>3. ALESSANDRO REALE - IS ENERGY</h4>
                <p>📱 <strong>370-3068232</strong><br>
                <em>Abbadia Alpina - PDC Fotovoltaico VMC</em></p>
            </div>
            
            <div class="highlight-box">
                <h4>🔄 PROCEDURA ATTIVAZIONE/RESET</h4>
                <ol>
                    <li><strong>PORTARE</strong> levetta R7 SU ON per 2 minuti</li>
                    <li><strong>VERIFICARE</strong> che avvenga il ciclo di ventilazione con rumore caratteristico</li>
                    <li><strong>APRIRE</strong> cassetto della MODULA PLUS</li>
                    <li><strong>CONTROLLARE</strong> che il visore LED NON sia di colore rosso</li>
                    <li><strong>Se LED rosso:</strong> Premere pulsante a sinistra nel cassetto per reset</li>
                    <li><strong>VERIFICARE</strong> LED rosso sopra R7 in armadio Shelly QE2</li>
                    <li><strong>CONTROLLARE</strong> visore rosso su contattore R7 QE1</li>
                </ol>
            </div>
        </div>
        
        <!-- FUNCTION -->
        <div class="function-section">
            <h3 class="section-title">🔥 COSA FA R7</h3>
            <div class="highlight-box">
                <h4>Funzione Principale:</h4>
                <p><strong>R7 alimenta la CALDAIA A GAS Modula Plus (BACKUP)</strong></p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 20px;">
                <div class="highlight-box">
                    <h4>🟢 ON</h4>
                    <p>Modula Plus alimentata e può funzionare</p>
                </div>
                <div class="highlight-box">
                    <h4>🔴 OFF</h4>
                    <p>Modula Plus spenta</p>
                </div>
                <div class="highlight-box">
                    <h4>🔵 CENTRALE</h4>
                    <p>Controllo automatico (antiblocco settimanale)<br>
                    <em>⚠️ Richiede: Home Assistant → Internet → Rete Wi-Fi</em></p>
                </div>
            </div>
            
            <div class="highlight-box" style="margin-top: 20px;">
                <h4>🔄 Funzione Antiblocco:</h4>
                <ul>
                    <li><strong>Automatica:</strong> 1 volta alla settimana tramite Home Assistant</li>
                    <li><strong>Durata:</strong> 2 ore di funzionamento</li>
                    <li><strong>Scopo:</strong> Prevenire blocco meccanico caldaia</li>
                </ul>
            </div>
            
            <div class="highlight-box">
                <h4>🔌 COLLEGAMENTI</h4>
                <p><strong>Input:</strong> shellyplus1-1c692044c2ac Switch 0<br>
                <strong>Output:</strong> Alimentazione 220V Modula Plus<br>
                <strong>Sistema:</strong> Home Assistant → Internet → Rete Wi-Fi → Shelly</p>
            </div>
        </div>
        
        <!-- CHECKLIST -->
        <div class="checklist-section">
            <h3 class="section-title">🔥 CHECKLIST SISTEMA CALDAIA BACKUP</h3>
            <p style="color: white; margin-bottom: 20px;"><strong>R7 gestisce la caldaia backup - SOLO per emergenze PDC (Pompa Di Calore):</strong></p>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">0% Completato</div>
            
            <h4 style="color: white; margin: 20px 0;">⚠️ PREREQUISITI CRITICI</h4>
            <div class="checklist-grid">
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>PDC (Pompa Di Calore) non funzionante:</strong> Sistema principale in avaria</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Contatore gas:</strong> NON piombato (ATTUALMENTE È PIOMBATO!)</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Autorizzazione:</strong> Conferma che è un'emergenza reale</span>
                </div>
            </div>
            
            <h4 style="color: white; margin: 20px 0;">🔧 CONTROLLI GAS</h4>
            <div class="checklist-grid">
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Rubinetto 1</strong> (cassetta esterna): APERTO</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Rubinetto 2</strong> (cassetta esterna): APERTO</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Rubinetto sotto Modula Plus:</strong> APERTO</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Contatore gas:</strong> Attivo e non piombato</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Pressione gas:</strong> Presente nel sistema</span>
                </div>
            </div>
            
            <h4 style="color: white; margin: 20px 0;">💧 SISTEMA IDRAULICO CALDAIA</h4>
            <div class="checklist-grid">
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Pressione acqua</strong> caldaia: > 1.0 bar</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Rubinetti acqua</strong> caldaia: Aperti</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Circolatore caldaia:</strong> Integrato in Modula Plus</span>
                </div>
            </div>
            
            <h4 style="color: white; margin: 20px 0;">🔴 CONTROLLI ELETTRICI R7</h4>
            <div class="checklist-grid">
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>LED R7</strong> (Armadio Shelly QE2): ROSSO quando attivato</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Visore R7</strong> (Quadro QE1): ROSSO quando alimentata</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Alimentazione</strong> 220V alla Modula Plus: Attiva</span>
                </div>
            </div>
            
            <h4 style="color: white; margin: 20px 0;">🎯 TEST ATTIVAZIONE CALDAIA</h4>
            <div class="checklist-grid">
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Levetta R7:</strong> Portare su ON per 2 minuti</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Rumore ventilazione:</strong> Ciclo caratteristico caldaia</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>LED cassetto Modula:</strong> NON ROSSO (nessun errore)</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <span class="checkbox"></span>
                    <span><strong>Riscaldamento:</strong> Caldaia inizia a scaldare</span>
                </div>
            </div>
            
            <!-- RESULTS -->
            <div style="margin-top: 30px;">
                <h4 style="color: white;">✅ RISULTATO CHECKLIST:</h4>
                <div class="result-box" id="resultSuccess" style="display: none;">
                    <h4>🔥 TUTTO SPUNTATO = Caldaia backup funziona</h4>
                    <p>Sistema riscaldamento attivo<br>
                    <strong>ATTENZIONE: Solo per emergenze!</strong></p>
                </div>
                <div class="result-box warning" id="resultPartial" style="display: none;">
                    <h4>❌ GAS PIOMBATO = Caldaia NON utilizzabile</h4>
                    <p>Ripristinare fornitura gas prima</p>
                </div>
                <div class="result-box emergency" id="resultProblem" style="display: none;">
                    <h4>🆘 PROBLEMI = Chiamare ELVIS 347-4958076 (specialista gas)</h4>
                </div>
            </div>
        </div>
        
        <!-- CURRENT STATUS -->
        <div class="status-section">
            <h3 class="section-title">⚡ STATO ATTUALE SISTEMA</h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="highlight-box">
                    <h4>🔴 SITUAZIONE GAS (CRITICA):</h4>
                    <ul>
                        <li><strong>Contatore:</strong> PIOMBATO per disdetta</li>
                        <li><strong>Fornitura:</strong> INTERROTTA</li>
                        <li><strong>Previsione:</strong> Solo PDC (Pompa Di Calore) per riscaldamento 2025-2026</li>
                    </ul>
                </div>
                
                <div class="highlight-box">
                    
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema Completo Riscaldamento con PDC</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(145deg, #2d3748 0%, #1a202c 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid #4a5568;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);
            padding: 20px;
            border-radius: 15px;
        }

        .schema-container {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .step-box {
            background: linear-gradient(145deg, #34495e, #2c3e50);
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #3498db;
            position: relative;
            transition: all 0.3s ease;
        }

        .step-box:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            border-left-color: #e74c3c;
        }

        .step-number {
            background: #3498db;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: absolute;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
            border: 3px solid #2c3e50;
        }

        .step-content {
            margin-left: 30px;
        }

        .step-title {
            color: #3498db;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .step-description {
            color: white;
            line-height: 1.4;
        }

        .entity-code {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .condition-box {
            background: rgba(39, 174, 96, 0.1);
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
        }

        .condition-title {
            color: #27ae60;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .condition-list {
            color: white;
            margin: 0;
            padding-left: 20px;
        }

        .warning-box {
            background: rgba(231, 76, 60, 0.1);
            border: 2px solid #e74c3c;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .warning-title {
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .flow-arrow {
            text-align: center;
            font-size: 2em;
            color: #3498db;
            margin: 10px 0;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .component {
            background: linear-gradient(145deg, #9b59b6, #8e44ad);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 2px solid #9b59b6;
            transition: all 0.3s ease;
        }

        .component:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .photo-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .photo-btn:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .location-info {
            background: rgba(241, 196, 15, 0.2);
            color: #f1c40f;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: center;
            margin-top: 10px;
            border: 1px solid rgba(241, 196, 15, 0.3);
        }

        .manual-section {
            background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #1976d2;
        }

        .manual-link {
            display: inline-block;
            background: rgba(255,255,255,0.15);
            color: white;
            text-decoration: none;
            padding: 12px 18px;
            margin: 8px;
            border-radius: 8px;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .manual-link:hover {
            background: rgba(255,255,255,0.25);
            border-color: #e74c3c;
            transform: translateY(-2px);
            color: #e74c3c;
        }

        /* Popup foto */
        .photo-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            cursor: pointer;
        }

        .photo-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90%;
        }

        .photo-content img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }

        .photo-title {
            color: white;
            text-align: center;
            margin-top: 15px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 8px;
            font-size: 1.2em;
        }

        .close-btn {
            position: absolute;
            top: -15px;
            right: -15px;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            z-index: 1001;
            font-size: 16px;
        }

        .filename-display {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            margin-top: 5px;
            display: inline-block;
        }

        @media (max-width: 768px) {
            .component-grid {
                grid-template-columns: 1fr;
            }
            
            .step-number {
                left: -15px;
                width: 30px;
                height: 30px;
            }
            
            .step-content {
                margin-left: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè† SCHEMA COMPLETO RISCALDAMENTO CON PDC</h1>
            <p>Controllo Home Assistant + Logica Funzionamento + Quadro Elettrico</p>
            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; margin-top: 15px;">
                <strong>Seriale: 4QE99993 | Anno: 2022 | Potenza: 11.0kW | COP: 5.00</strong>
            </div>
        </div>

        <!-- CONTROLLI PRELIMINARI SISTEMA IDRAULICO -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #e67e22; margin-bottom: 30px;">üíß CONTROLLI PRELIMINARI SISTEMA IDRAULICO</h2>
            
            <div class="step-box">
                <div class="step-number">A</div>
                <div class="step-content">
                    <div class="step-title">üå°Ô∏è VALVOLE TERMOSTATICHE TADO SUI TERMOSIFONI</div>
                    <div class="step-description">
                        Regolazione temperatura valvole termostatiche:
                        <br>‚Ä¢ Valvole Tado regolate per temperatura voluta
                        <br>‚Ä¢ Controllo locale o tramite APP
                        <br>‚Ä¢ Verifica apertura/chiusura corretta
                        <br>‚Ä¢ Comunicazione wireless operativa
                        <br><button class="photo-btn" onclick="showPhoto('valvole_tado_termosifoni', 'Valvole Tado Termosifoni')">üì∑ MOSTRA VALVOLE TADO</button>
                        <div class="filename-display">valvole_tado_termosifoni.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">B</div>
                <div class="step-content">
                    <div class="step-title">üîÑ POMPA P1 CIRCOLATORE IMPIANTO GRUNDFOS ALPHA</div>
                    <div class="step-description">
                        Pompa circolazione sistema riscaldamento:
                        <br>‚Ä¢ Grundfos ALPHA 1 L 25-60 130 operativa
                        <br>‚Ä¢ LED di stato verdi accesi
                        <br>‚Ä¢ Modalit√† di funzionamento corretta
                        <br>‚Ä¢ Nessun rumore anomalo durante circolazione
                        <br><button class="photo-btn" onclick="showPhoto('pompa_grundfos_alpha', 'Pompa Grundfos ALPHA P1')">üì∑ MOSTRA POMPA P1</button>
                        <div class="filename-display">pompa_grundfos_alpha.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">C</div>
                <div class="step-content">
                    <div class="step-title">üíß PRESSIONE ACQUA CIRCUITO TERMOSIFONI</div>
                    <div class="step-description">
                        Controllo pressione sistema riscaldamento:
                        <br>‚Ä¢ Pressione acqua circuito termosifoni: 1,0-1,5 bar
                        <br>‚Ä¢ Manometro con lettura nel range corretto
                        <br>‚Ä¢ Nessuna perdita visibile nel sistema
                        <br>‚Ä¢ Vaso espansione funzionante
                        <br><button class="photo-btn" onclick="showPhoto('manometro_pressione_termosifoni', 'Manometro Pressione Termosifoni')">üì∑ MOSTRA MANOMETRO</button>
                        <div class="filename-display">manometro_pressione_termosifoni.jpg</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ALIMENTAZIONI INFRASTRUTTURA -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #9b59b6; margin-bottom: 30px;">üîå ALIMENTAZIONI INFRASTRUTTURA</h2>
            
            <div class="step-box">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">üè† ROUTER ACCESO (LOCALE TECNICO)</div>
                    <div class="step-description">
                        Router principale sistema domotico:
                        <br>‚Ä¢ Router alimentato e funzionante
                        <br>‚Ä¢ LED di stato accesi
                        <br>‚Ä¢ Connettivit√† di rete attiva
                        <br><button class="photo-btn" onclick="showPhoto('router_locale_tecnico', 'Router Locale Tecnico')">üì∑ MOSTRA ROUTER</button>
                        <div class="filename-display">router_locale_tecnico.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">üè† HOME ASSISTANT ONLINE E FUNZIONANTE</div>
                    <div class="step-description">
                        Sistema di controllo domotico:
                        <br>‚Ä¢ Home Assistant avviato e raggiungibile
                        <br>‚Ä¢ Dashboard accessibile via web
                        <br>‚Ä¢ Tutti i dispositivi connessi
                        <br><button class="photo-btn" onclick="showPhoto('home_assistant_online', 'Home Assistant Online')">üì∑ MOSTRA HA</button>
                        <div class="filename-display">home_assistant_online.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">üåê INTERNET ATTIVO</div>
                    <div class="step-description">
                        Connessione internet stabile:
                        <br>‚Ä¢ Connessione WAN attiva
                        <br>‚Ä¢ Accesso remoto funzionante
                        <br>‚Ä¢ DNS e gateway raggiungibili
                        <br><button class="photo-btn" onclick="showPhoto('test_internet', 'Test Connessione Internet')">üì∑ MOSTRA TEST</button>
                        <div class="filename-display">test_internet.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-title">üéõÔ∏è CONTROLLER YUTAKY ACCESO (VICINO PDC, LOCALE TECNICO)</div>
                    <div class="step-description">
                        Controllo pompa di calore:
                        <br>‚Ä¢ Controller alimentato e operativo
                        <br>‚Ä¢ Display acceso con parametri
                        <br>‚Ä¢ Comunicazione con unit√† esterna
                        <br><button class="photo-btn" onclick="showPhoto('controller_yutaky_acceso', 'Controller YUTAKY Acceso')">üì∑ MOSTRA CONTROLLER</button>
                        <div class="filename-display">controller_yutaky_acceso.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">5</div>
                <div class="step-content">
                    <div class="step-title">‚ö° QUADRO QE1 ALIMENTATO</div>
                    <div class="step-description">
                        Quadro elettrico principale:
                        <br>‚Ä¢ Alimentazione 230V presente
                        <br>‚Ä¢ LED di stato operativi
                        <br>‚Ä¢ Protezioni attive
                        <br><button class="photo-btn" onclick="showPhoto('quadro_qe1_alimentato', 'Quadro QE1 Alimentato')">üì∑ MOSTRA QE1</button>
                        <div class="filename-display">quadro_qe1_alimentato.jpg</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-number">6</div>
                <div class="step-content">
                    <div class="step-title">üì¶ ARMADIO QE2 SHELLY ALIMENTATO</div>
                    <div class="step-description">
                        Armadio dispositivi Shelly:
                        <br>‚Ä¢ Alimentazione moduli Shelly
                        <br>‚Ä¢ LED di stato attivi
                        <br>‚Ä¢ Comunicazione Wi-Fi operativa
                        <br><button class="photo-btn" onclick="showPhoto('armadio_qe2_alimentato', 'Armadio QE2 Shelly Alimentato')">üì∑ MOSTRA QE2</button>
                        <div class="filename-display">armadio_qe2_alimentato.jpg</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RILEVAMENTO TEMPERATURA NETATMO -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #f39c12; margin-bottom: 30px;">üå°Ô∏è RILEVAMENTO TEMPERATURA NETATMO</h2>
            
            <div class="step-box">
                <div class="step-number">7</div>
                <div class="step-content">
                    <div class="step-title">üå°Ô∏è SENSORE NETATMO CUCINA</div>
                    <div class="step-description">
                        Rilevamento temperatura ambiente tramite <span class="entity-code">sensor.salone_cucina_temperatura</span>
                        <br>‚Ä¢ Lettura in tempo reale temperatura ambiente
                        <br>‚Ä¢ Comunicazione wireless con Home Assistant
                        <br>‚Ä¢ Trigger per logica di riscaldamento
                        <br><button class="photo-btn" onclick="showPhoto('netatmo_sensore', 'Sensore Netatmo Cucina')">üì∑ MOSTRA SENSORE</button>
                        <div class="filename-display">netatmo_sensore.jpg</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SEQUENZA COMPLETA DI ATTIVAZIONE -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #e67e22; margin-bottom: 30px;">üîÑ SEQUENZA COMPLETA ATTIVAZIONE PDC</h2>
            
            <div class="step-box">
                <div class="step-number">8</div>
                <div class="step-content">
                    <div class="step-title">üè† RICHIESTA CALORE HOME ASSISTANT</div>
                    <div class="step-description">
                        Home Assistant rileva necessit√† riscaldamento tramite <span class="entity-code">climate.termostato_ambiente</span>
                        <br>‚Ä¢ Temperatura ambiente < set-point (21¬∞C)
                        <br>‚Ä¢ Algoritmo di controllo attiva richiesta calore
                        <br><button class="photo-btn" onclick="showPhoto('home_assistant_dashboard', 'Home Assistant Dashboard')">üì∑ MOSTRA DASHBOARD</button>
                        <div class="filename-display">home_assistant_dashboard.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">9</div>
                <div class="step-content">
                    <div class="step-title">üåê VERIFICA CONNETTIVITA'</div>
                    <div class="step-description">
                        Controllo prerequisiti sistema:
                        <br>‚Ä¢ Internet presente e stabile
                        <br>‚Ä¢ Wi-Fi MOMA connesso e operativo
                        <br>‚Ä¢ Comunicazione con dispositivi Shelly attiva
                        <br><button class="photo-btn" onclick="showPhoto('wifi_connessione', 'Stato Connessione Wi-Fi')">üì∑ MOSTRA CONNESSIONE</button>
                        <div class="filename-display">wifi_connessione.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">10</div>
                <div class="step-content">
                    <div class="step-title">‚ö° ATTIVAZIONE SWITCH SHELLY</div>
                    <div class="step-description">
                        Home Assistant comanda <span class="entity-code">switch.shellyplus1_90150687a670_switch_0</span>
                        <br>‚Ä¢ Shelly Plus 1 attiva uscita rel√®
                        <br>‚Ä¢ Tensione 230V applicata al circuito di controllo
                        <br><button class="photo-btn" onclick="showPhoto('shelly_90150687a670', 'Shelly Plus 1 - 90150687A670')">üì∑ MOSTRA SHELLY</button>
                        <div class="filename-display">shelly_90150687a670.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">11</div>
                <div class="step-content">
                    <div class="step-title">üîå CHIUSURA CONTATTO QE2-R1</div>
                    <div class="step-description">
                        Comando Shelly chiude contatto pulito QE2-R1:
                        <br>‚Ä¢ Contatto normalmente aperto si chiude
                        <br>‚Ä¢ Permette eccitazione bobina QE1-R1
                        <br>‚Ä¢ Segnale di richiesta verso controller YUTAKI
                        <br><button class="photo-btn" onclick="showPhoto('contatto_qe2_r1', 'Contatto QE2-R1')">üì∑ MOSTRA CONTATTO</button>
                        <div class="filename-display">contatto_qe2_r1.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">12</div>
                <div class="step-content">
                    <div class="step-title">üß≤ ECCITAZIONE BOBINA QE1-R1</div>
                    <div class="step-description">
                        Contattore QE1-R1 si eccita:
                        <br>‚Ä¢ Bobina alimentata a 230V
                        <br>‚Ä¢ Contatti ausiliari si chiudono
                        <br>‚Ä¢ LED di stato QE1 si accende (rosso)
                        <br><button class="photo-btn" onclick="showPhoto('contattore_qe1_r1', 'Contattore QE1-R1')">üì∑ MOSTRA CONTATTORE</button>
                        <div class="filename-display">contattore_qe1_r1.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">13</div>
                <div class="step-content">
                    <div class="step-title">üì° CHIUSURA CONTATTO PULITO QE-R1</div>
                    <div class="step-description">
                        Contatto pulito QE-R1 si chiude:
                        <br>‚Ä¢ Segnale verso controller YUTAKI
                        <br>‚Ä¢ Connessione diretta morsetti C1
                        <br>‚Ä¢ Richiesta calore confermata
                        <br><button class="photo-btn" onclick="showPhoto('morsettiera_c1', 'Morsettiera C1 Controller')">üì∑ MOSTRA MORSETTIERA</button>
                        <div class="filename-display">morsettiera_c1.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">14</div>
                <div class="step-content">
                    <div class="step-title">üéØ RICHIESTA CALORE SU CONTROLLER YUTAKI</div>
                    <div class="step-description">
                        Controller YUTAKI riceve segnale su circuito C1:
                        <br>‚Ä¢ Elaborazione richiesta calore
                        <br>‚Ä¢ Verifica parametri operativi
                        <br>‚Ä¢ Preparazione avvio PDC
                        <br><button class="photo-btn" onclick="showPhoto('controller_yutaki_display', 'Controller YUTAKI Display')">üì∑ MOSTRA CONTROLLER</button>
                        <div class="filename-display">controller_yutaki_display.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">15</div>
                <div class="step-content">
                    <div class="step-title">‚úÖ VERIFICA CONDIZIONI AVVIO PDC</div>
                    <div class="step-description">
                        Controller verifica tutte le condizioni per l'avvio
                        <br><button class="photo-btn" onclick="showPhoto('parametri_operativi', 'Parametri Operativi PDC')">üì∑ MOSTRA PARAMETRI</button>
                        <div class="filename-display">parametri_operativi.jpg</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONDIZIONI AVVIO PDC -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #27ae60; margin-bottom: 30px;">üîç CONDIZIONI AVVIO PDC</h2>
            
            <div class="condition-box">
                <div class="condition-title">üå°Ô∏è TEMPERATURA ACQUA RITORNO PDC (Pompa di Calore)</div>
                <ul class="condition-list">
                    <li>Temperatura acqua ritorno < set-point impostato</li>
                    <li>Delta temperatura (ŒîT) sufficiente per avvio</li>
                    <li>Sensore temperatura funzionante e calibrato</li>
                </ul>
                <button class="photo-btn" onclick="showPhoto('sensore_temperatura', 'Sensore Temperatura Acqua')">üì∑ MOSTRA SENSORE</button>
                <div class="filename-display">sensore_temperatura.jpg</div>
            </div>

            <div class="condition-box">
                <div class="condition-title">‚è∞ DUTY CYCLE PDC (Ciclo di Lavoro)</div>
                <ul class="condition-list">
                    <li>PDC in fase ON del ciclo di lavoro</li>
                    <li>Tempo minimo tra avvii rispettato (3-5 min)</li>
                    <li>Non in modalit√† standby o manutenzione</li>
                </ul>
                <button class="photo-btn" onclick="showPhoto('display_duty_cycle', 'Display Duty Cycle')">üì∑ MOSTRA DUTY CYCLE</button>
                <div class="filename-display">display_duty_cycle.jpg</div>
            </div>

            <div class="condition-box">
                <div class="condition-title">üõ°Ô∏è SMART GRID (Sistema Protezioni Sicurezza)</div>
                <ul class="condition-list">
                    <li><span class="entity-code">switch.shellyplus1_8813bfcdbda0_switch_0</span> in stato OFF</li>
                    <li>Contatto QE2-R6 aperto (protezione generale)</li>
                    <li>LED QE2-R6 spento (nessun allarme attivo)</li>
                    <li>Contattore QE1-R1 NON energizzato (levetta in posizione bassa)</li>
                </ul>
                <button class="photo-btn" onclick="showPhoto('shelly_8813bfcdbda0', 'Shelly Plus 1 - 8813BFCDBDA0 Protezioni')">üì∑ MOSTRA PROTEZIONI</button>
                <div class="filename-display">shelly_8813bfcdbda0.jpg</div>
                <button class="photo-btn" onclick="showPhoto('contatto_qe2_r6', 'Contatto QE2-R6 Sicurezza')">üì∑ MOSTRA QE2-R6</button>
            </div>

            <div class="condition-box">
                <div class="condition-title">‚ö° ALIMENTAZIONI E PRESSIONE CIRCUITO IDRAULICO</div>
                <ul class="condition-list">
                    <li>Alimentazione 230V monofase stabile</li>
                    <li>Pressione circuito idraulico: 0.10-0.30 MPa (come da targhetta)</li>
                    <li>Circolazione acqua sistema funzionante</li>
                    <li>Temperature ambiente operative (-20¬∞C / +35¬∞C)</li>
                    <li><strong>Valvole Tado termosifoni</strong> - verificare apertura corretta</li>
                </ul>
                <button class="photo-btn" onclick="showPhoto('manometro_pressione', 'Manometro Pressione Sistema')">üì∑ MOSTRA PRESSIONE</button>
                <div class="filename-display">manometro_pressione.jpg</div>
                <button class="photo-btn" onclick="showPhoto('valvole_tado', 'Valvole Tado Termosifoni')">üì∑ MOSTRA VALVOLE TADO</button>
                <div class="filename-display">valvole_tado.jpg</div>
            </div>
        </div>

        <!-- AVVIO EFFETTIVO PDC -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #e74c3c; margin-bottom: 30px;">üöÄ AVVIO EFFETTIVO PDC RASM-4VNE</h2>
            
            <div class="step-box">
                <div class="step-number">16</div>
                <div class="step-content">
                    <div class="step-title">üíß ATTIVAZIONE POMPA ACQUA</div>
                    <div class="step-description">
                        ‚Ä¢ Pompa circolazione acqua si avvia
                        <br>‚Ä¢ Verifica pressione sistema (0.10-0.30 MPa)
                        <br>‚Ä¢ Controllo flusso minimo
                        <br>‚Ä¢ Preparazione circuito idraulico
                        <br><button class="photo-btn" onclick="showPhoto('pompa_circolazione', 'Pompa Circolazione Acqua')">üì∑ MOSTRA POMPA</button>
                        <div class="filename-display">pompa_circolazione.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">17</div>
                <div class="step-content">
                    <div class="step-title">üî• AVVIO COMPRESSORE INVERTER</div>
                    <div class="step-description">
                        ‚Ä¢ Soft-start compressore (60-90 secondi)
                        <br>‚Ä¢ Incremento graduale velocit√† inverter
                        <br>‚Ä¢ Monitoraggio assorbimento elettrico
                        <br>‚Ä¢ Controllo pressioni refrigerante R410A
                        <br><button class="photo-btn" onclick="showPhoto('compressore_inverter', 'Compressore Inverter')">üì∑ MOSTRA COMPRESSORE</button>
                        <div class="filename-display">compressore_inverter.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">18</div>
                <div class="step-content">
                    <div class="step-title">üéõÔ∏è REGIME OPERATIVO</div>
                    <div class="step-description">
                        ‚Ä¢ Raggiungimento potenza nominale
                        <br>‚Ä¢ Modulazione automatica 30-100% (3.3-11.0kW)
                        <br>‚Ä¢ Ottimizzazione COP in tempo reale
                        <br>‚Ä¢ Controllo temperature mandata/ritorno
                        <br><button class="photo-btn" onclick="showPhoto('display_potenza', 'Display Potenza e COP')">üì∑ MOSTRA POTENZA</button>
                        <div class="filename-display">display_potenza.jpg</div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow">‚¨áÔ∏è</div>

            <div class="step-box">
                <div class="step-number">19</div>
                <div class="step-content">
                    <div class="step-title">üìä MONITORAGGIO HOME ASSISTANT</div>
                    <div class="step-description">
                        ‚Ä¢ Lettura parametri in tempo reale
                        <br>‚Ä¢ Calcolo COP istantaneo e giornaliero
                        <br>‚Ä¢ Monitoraggio consumi elettrici
                        <br>‚Ä¢ Grafici prestazioni e storico
                        <br><button class="photo-btn" onclick="showPhoto('grafici_monitoraggio', 'Grafici Monitoraggio HA')">üì∑ MOSTRA GRAFICI</button>
                        <div class="filename-display">grafici_monitoraggio.jpg</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- COMPONENTI QUADRO ELETTRICO -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #9b59b6; margin-bottom: 30px;">‚ö° COMPONENTI PRINCIPALI</h2>
            
            <div class="component-grid">
                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('server_homeassistant', 'Server HomeAssistant')">üì∑ MOSTRA HA</button>
                    <h4>üíª SERVER HOMEASSISTANT</h4>
                    <p><strong>Sistema Controllo Domotico</strong></p>
                    <p>Dashboard e automazioni<br>Gestione completa sistema</p>
                    <div class="location-info">üìç <em>LOCALE TECNICO</em></div>
                    <div class="filename-display">server_homeassistant.jpg</div>
                </div>

                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('quadri_qe1_qe2', 'Quadri Elettrici QE1 e QE2')">üì∑ MOSTRA QUADRI</button>
                    <h4>‚ö° QUADRI ELETTRICI QE1 e QE2</h4>
                    <p><strong>Contenitore Generale</strong></p>
                    <p>Shelly + Rel√® + Alimentazioni<br>Controllo completo sistema</p>
                    <div class="location-info">üìç <em>LOCALE TECNICO</em></div>
                    <div class="filename-display">quadri_qe1_qe2.jpg</div>
                </div>
                
                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('pdc_unita_esterna', 'PDC Unit√† Esterna')">üì∑ MOSTRA PDC</button>
                    <h4>üè† PDC UNIT√Ä ESTERNA</h4>
                    <p><strong>RASM-4VNE</strong></p>
                    <p>Lato ovest casa<br>Seriale: 4QE99993</p>
                    <div class="location-info">üìç <em>Esterno casa - lato ovest</em></div>
                    <div class="filename-display">pdc_unita_esterna.jpg</div>
                </div>
                
                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('targhetta_pdc', 'Targhetta PDC')">üì∑ MOSTRA TARGHETTA</button>
                    <h4>üè∑Ô∏è TARGHETTA PDC</h4>
                    <p><strong>Dati Identificativi</strong></p>
                    <p>Seriale: 4QE99993<br>Anno: 2022 - 11.0kW</p>
                    <div class="location-info">üìç <em>Frontale PDC</em></div>
                    <div class="filename-display">targhetta_pdc.jpg</div>
                </div>

                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('controller_yutaki', 'Controller YUTAKI')">üì∑ MOSTRA YUTAKI</button>
                    <h4>üéõÔ∏è CONTROLLER YUTAKI</h4>
                    <p><strong>Unit√† Controllo Interna</strong></p>
                    <p>Display e comandi<br>Gestione parametri PDC</p>
                    <div class="location-info">üìç <em>LOCALE TECNICO</em></div>
                    <div class="filename-display">controller_yutaki.jpg</div>
                </div>

                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('pompa_p1', 'Pompa P1')">üì∑ MOSTRA POMPA</button>
                    <h4>üîÑ POMPA P1</h4>
                    <p><strong>Grundfos ALPHA</strong></p>
                    <p>Circolazione sistema<br>ALPHA 1 L 25-60 130</p>
                    <div class="location-info">üìç <em>LOCALE TECNICO</em></div>
                    <div class="filename-display">pompa_p1.jpg</div>
                </div>

                <div class="component">
                    <button class="photo-btn" onclick="showPhoto('manometro_pressione_impianto', 'Manometro Pressione Impianto')">üì∑ MOSTRA MANOMETRO</button>
                    <h4>üìä MANOMETRO PRESSIONE</h4>
                    <p><strong>IMPIANTO Termosifoni</strong></p>
                    <p>Controllo pressione<br>Range: 1,0-1,5 bar</p>
                    <div class="location-info">üìç <em>LOCALE TECNICO</em></div>
                    <div class="filename-display">manometro_pressione_impianto.jpg</div>
                </div>
            </div>
        </div>

        <!-- TROUBLESHOOTING -->
        <div class="schema-container">
            <h2 style="text-align: center; color: #e74c3c; margin-bottom: 30px;">üÜò RISOLUZIONE PROBLEMI</h2>
            
            <div class="warning-box">
                <div class="warning-title">üî¥ PDC NON PARTE</div>
                <p style="color: white;">
                    <strong>Controlli sequenziali:</strong><br>
                    1. Verificare Home Assistant ONLINE<br>
                    2. Test Shelly 90150687A670 (deve passare a ON)<br>
                    3. Controllo contattore QE1-R1 (LED rosso acceso)<br>
                    4. Verifica circuito C1 chiuso<br>
                    5. Controllo protezioni QE2-R6 (deve essere aperto)<br>
                    6. Attesa 60-90 secondi per avvio compressore
                </p>
                <button class="photo-btn" onclick="showPhoto('troubleshooting_steps', 'Passi Troubleshooting')">üì∑ GUIDA VISIVA</button>
                <div class="filename-display">troubleshooting_steps.jpg</div>
            </div>

            <div class="warning-box">
                <div class="warning-title">‚ö° PROBLEMI COMUNICAZIONE</div>
                <p style="color: white;">
                    <strong>Verifica connettivit√†:</strong><br>
                    1. Wi-Fi MOMA connesso<br>
                    2. Internet stabile<br>
                    3. Dispositivi Shelly raggiungibili<br>
                    4. Home Assistant responsive<br>
                    5. Log sistema per errori di comunicazione
                </p>
                <button class="photo-btn" onclick="showPhoto('diagnostica_rete', 'Diagnostica Connessione')">üì∑ MOSTRA DIAGNOSTICA</button>
                <div class="filename-display">diagnostica_rete.jpg</div>
            </div>

            <div class="warning-box">
                <div class="warning-title">üõ°Ô∏è PROTEZIONI ATTIVE</div>
                <p style="color: white;">
                    <strong>Stato protezioni:</strong><br>
                    1. Shelly 8813BFCDBDA0 deve essere OFF<br>
                    2. Contatto QE2-R6 deve essere aperto<br>
                    3. LED QE2-R6 deve essere spento<br>
                    4. Contattore QE1-R1 NON energizzato (levetta bassa)<br>
                    5. Temperature nei limiti operativi<br>
                    6. Pressioni circuito idraulico normali
                </p>
                <button class="photo-btn" onclick="showPhoto('stato_protezioni', 'Stato Protezioni Sistema')">üì∑ MOSTRA PROTEZIONI</button>
                <div class="filename-display">stato_protezioni.jpg</div>
            </div>
        </div>

        <!-- MANUALI TECNICI -->
        <div class="manual-section">
            <h2 style="text-align: center; color: white; margin-bottom: 20px;">üìö DOCUMENTAZIONE TECNICA</h2>
            
            <div style="text-align: center;">
                <a href="https://tyco.widen.net/content/oi8zbp9jky/pdf/PMIT0602_rev1_04-24.pdf?u=oknhak" class="manual-link" target="_blank">
                    üìñ MANUALE TYCO PMIT0602<br>
                    <small>Componenti di controllo - Rev.1 04/24</small>
                </a>
                <a href="https://tyco.widen.net/content/2cndrf9iv5/pdf/PMIT0342B_rev6_01-21.pdf?u=oknhak" class="manual-link" target="_blank">
                    üîß MANUALE TYCO PMIT0342B<br>
                    <small>Rel√® e contattori - Rev.6 01/21</small>
                </a>
                <a href="manuale_grundfos_alpha.pdf" class="manual-link" target="_blank">
                    üîÑ MANUALE GRUNDFOS ALPHA<br>
                    <small>Pompa circolazione P1 - Installazione e uso</small>
                </a>
            </div>
        </div>

        <!-- POPUP FOTO -->
        <div id="photoPopup" class="photo-popup" onclick="closePhoto()">
            <div class="photo-content">
                <button class="close-btn" onclick="closePhoto()">‚úï</button>
                <img id="photoImg" src="" alt="">
                <div id="photoTitle" class="photo-title"></div>
            </div>
        </div>
    </div>

    <script>
        function showPhoto(filename, title) {
            const popup = document.getElementById('photoPopup');
            const img = document.getElementById('photoImg');
            const titleDiv = document.getElementById('photoTitle');
            
            img.src = filename + '.jpg';
            titleDiv.textContent = title + ' (' + filename + '.jpg)';
            popup.style.display = 'block';
            
            // Prevenire lo scroll del body
            document.body.style.overflow = 'hidden';
        }

        function closePhoto() {
            const popup = document.getElementById('photoPopup');
            popup.style.display = 'none';
            
            // Ripristinare lo scroll del body
            document.body.style.overflow = 'auto';
        }

        // Chiudere con tasto ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closePhoto();
            }
        });
    </script>
</body>
</html>